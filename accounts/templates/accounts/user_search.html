{% extends "base_with_sidebar.html" %}

{% block content %}
<h3>User Search</h3>

<form method="get" action="{% url 'accounts:user_search' %}" class="input-group mb-3">
  <input name="q" type="text" class="form-control" placeholder="Search users by public name" aria-label="Search users" autofocus value="{{ query }}">
  <button class="btn btn-primary" type="submit">Search</button>
</form>

{% if query %}
  <h4>Results for "{{ query }}":</h4>
  {% if results %}
    <ul class="list-group">
    {% for profile in results %}
      <li class="list-group-item d-flex justify-content-between align-items-center">
        <a href="{% url 'accounts:public_profile' profile.user.id %}">
          {{ profile.public_name }}
        </a>
        <span class="badge bg-secondary rounded-pill">
          {{ profile.user_groups_csv }}
        </span>
      </li>
    {% endfor %}
    </ul>
  {% else %}
    <p>No users found matching your search.</p>
  {% endif %}
{% endif %}
{% endblock %}

